[{"_id":{"$objectID":"5a6abc4cb0e23c31183e6fbd"},"code":"this.libs.getDomain.call(this, (er, domain) => {\n  if (er) return callback(er);\n\n  let merchantConfig = this.libs.flattenByNamespace(\"remita\", domain.config);\n  this.debug(merchantConfig);\n  this.libs.confirmRemitaPayment.call(this, this.args.invoiceNumber, merchantConfig, domain, (er, status) => {\n    if (er) return callback(er);\n\n    if (!status) return callback(new Error(\"You have been unable to confirm payment has been made against \" + this.args.invoiceNumber));\n\n    this.debug('payment successfully confirmed');\n    callback(null, { _invoiceNumber: this.args.invoiceNumber });\n  });\n});\n","title":"Check RRR transaction status","requiresIdentity":true,"__v":0,"standalone":false},{"_id":{"$objectID":"5a6e0aecd58b164cf0d46f7e"},"code":"this.debug(\"inserting o lvl ui\");\n//this.debug(this.args);\nthis.libs.getOLevelDetailsUI.call(this, (er, ui) => {\n  if (er) return callback(er);\n  this.args.$nextStep.form.elements.push(...ui);\n  return callback(null, this.args);\n});\n","title":"Insert Olevel Details","requiresIdentity":true,"__v":0,"standalone":false},{"_id":{"$objectID":"5a70cb6ea5538a22fc20eac6"},"code":"//NOTE: No user should ever be issued a claim to call this processor\nthis.libs.getDomain.call(this, (er, domain) => {\n  if (er) return callback(er);\n  Object.defineProperties(this.args, {\n    $appDomain: {\n      enumerable: false,\n      get: function() {\n        return domain;\n      }\n    }\n  });\n  callback(null, this.args);\n});\n","title":"Get Domain Config [NEVER ISSUE THIS CLAIM TO ANY USER]","requiresIdentity":true,"__v":0,"standalone":false},{"_id":{"$objectID":"5a72b60d48dda81fc8cd8f15"},"code":"setImmediate(callback, null, (Object.keys(this.args).length && this.args) || null);\n","title":"Make args initial data for a process","requiresIdentity":true,"__v":0,"standalone":false},{"_id":{"$objectID":"5a76c99c16fdef369067970f"},"code":"this.libs.getPersonalDetailsUI.call(this, (er, ui) => {\n  if (er) return callback(er);\n  this.args.$nextStep.form.elements.unshift(...ui);\n  return callback(null, this.args);\n});\n","title":"Inject Personal Details","requiresIdentity":true,"__v":0,"standalone":false},{"_id":{"$objectID":"5a9d248a31f48455489655ce"},"code":"if (this.args.$user && Object.keys(this.args.$user).length > 0) {\n  this.debug(\"user tried to register while logged in.\");\n  callback(new Error(\"Unauthorized\"));\n} else\n  this.libs.confirmInvoiceIsFor.call(this, this.args.invoiceNumber, \"EXECUTIVE_DIPLOMA_FORM\", er => {\n    if (er) return callback(er);\n    return this.libs.skipApplicationIfAllowed.call(\n      this,\n      this.args.$appDomain.config.executiveDiplomaApplicationClass,\n      \"SUBMIT_EXECUTIVE_DIPLOMA_FORM\",\n      callback\n    );\n  });\n","title":"Confirm Invoice is for Executive Diploma","uid":"CONFIRM_INVOICE_IS_FOR_EXECUTIVE_DIPLOMA","requiresIdentity":true,"standalone":false,"__v":0},{"_id":{"$objectID":"5a9d283531f48455489655d0"},"code":"this.libs.businessDetailsUI.call(this, (er, ui) => {\n  if (er) return callback(er);\n  this.args.$nextStep.form.elements.push(...ui);\n  return callback(null, this.args);\n});\n","title":"Inject Business Details UI","uid":"INJECT_BUSINESS_DETAILS_UI","requiresIdentity":false,"standalone":true,"__v":0},{"_id":{"$objectID":"5a9d42c831f48455489655d2"},"code":"let application = new this.libs.ExternalApplication(this);\r\napplication.extend = fn => {\r\n  if (this.args.businessDetails && this.args.businessDetails.signature) {\r\n    let fileUpload = this.entityRepo.infrastructure().fileUpload;\r\n    this.async.parallel([fileUpload.moveToPermanentSite.bind(fileUpload, this.args.businessDetails.signature)], fn);\r\n  }\r\n};\r\n\r\napplication.register(\r\n  \"executiveDiplomaApplicationClass\",\r\n  [\"PERSONAL_DETAILS\", \"OLEVEL_DETAILS\", \"EXECUTIVE_DIPLOMA_DETAILS\"],\r\n  [\r\n    function(application, cb) {\r\n      setImmediate(cb, null, [[\"GENERAL_STYLES\", \"TABLE_STYLES\"]]);\r\n    }\r\n  ],\r\n  callback\r\n);\r\n","title":"Submit Executive Diploma Form","requiresIdentity":true,"standalone":true,"__v":0,"uid":"SUBMIT_EXECUTIVE_DIPLOMA_FORM"}]

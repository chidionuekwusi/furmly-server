[{"_id":{"$objectID":"5a6abc4cb0e23c31183e6fbd"},"code":"this.libs.getDomain.call(this, (er, domain) => {\n  if (er) return callback(er);\n\n  let merchantConfig = this.libs.flattenByNamespace(\"remita\", domain.config);\n  this.debug(merchantConfig);\n  this.libs.confirmRemitaPayment.call(this, this.args.invoiceNumber, merchantConfig, domain, (er, status) => {\n    if (er) return callback(er);\n\n    if (!status) return callback(new Error(\"You have been unable to confirm payment has been made against \" + this.args.invoiceNumber));\n\n    this.debug('payment successfully confirmed');\n    callback(null, { _invoiceNumber: this.args.invoiceNumber });\n  });\n});\n","title":"Check RRR transaction status","requiresIdentity":true,"__v":0,"standalone":false},{"_id":{"$objectID":"5a6db8f34d6e022d3487d642"},"code":"this.debug(\"injecting personal/ next of kin details\");\n//this.debug(this.args);\n\nthis.libs.getNextOfKinDetailsUI.call(this, (er, kui) => {\n  if (er) return callback(er);\n  this.args.$nextStep.form.elements.unshift(...kui);\n  this.libs.getPersonalDetailsUI.call(this, (er, ui) => {\n    if (er) return callback(er);\n    this.args.$nextStep.form.elements.unshift(...ui);\n    return callback(null, this.args);\n  });\n});\n","title":"Inject personal Details and Next of Kin","requiresIdentity":true,"__v":0,"standalone":false},{"_id":{"$objectID":"5a6e0aecd58b164cf0d46f7f"},"code":"this.debug(\"inserting education history ui\");\n//this.debug(this.args);\nthis.libs.getEducationHistoryUI.call(this, (er, ui) => {\n  if (er) return callback(er);\n  this.args.$nextStep.form.elements.push(...ui);\n  return callback(null, this.args);\n});\n","title":"Insert Education History","requiresIdentity":true,"__v":0,"standalone":false},{"_id":{"$objectID":"5a70cb6ea5538a22fc20eac6"},"code":"//NOTE: No user should ever be issued a claim to call this processor\nthis.libs.getDomain.call(this, (er, domain) => {\n  if (er) return callback(er);\n  Object.defineProperties(this.args, {\n    $appDomain: {\n      enumerable: false,\n      get: function() {\n        return domain;\n      }\n    }\n  });\n  callback(null, this.args);\n});\n","title":"Get Domain Config [NEVER ISSUE THIS CLAIM TO ANY USER]","requiresIdentity":true,"__v":0,"standalone":false},{"_id":{"$objectID":"5a72b60d48dda81fc8cd8f15"},"code":"setImmediate(callback, null, (Object.keys(this.args).length && this.args) || null);\n","title":"Make args initial data for a process","requiresIdentity":true,"__v":0,"standalone":true},{"_id":{"$objectID":"5a8e96ae1ff23628b05b2401"},"code":"this.libs.confirmInvoiceIsFor.call(this,this.args.invoiceNumber, \"SANDWICH_FORM\", er => {\r\n  if (er) return callback(er);\r\n\r\n  return this.libs.skipApplicationIfAllowed.call(\r\n    this,\r\n    this.args.$appDomain.config.jupebApplicationClass,\r\n    \"SUBMIT_SANDWICH_FORM\",\r\n    callback\r\n  );\r\n});\r\n","title":"Confirm Invoice is for Sandwich","requiresIdentity":true,"standalone":false,"__v":0},{"_id":{"$objectID":"5a8e96ae1ff23628b05b2402"},"code":"new this.libs.ExternalApplication(this).register(\r\n  \"sandwichApplicationClass\",\r\n  [\"PERSONAL_DETAILS\"],\r\n  [\r\n    function(application, cb) {\r\n      setImmediate(cb, null, [[\"TABLE_STYLES\"]]);\r\n    }\r\n  ],\r\n  callback\r\n);\r\n\r\n\r\n// this.entityRepo.create('UNN_SANDWICH_APPLICATION', this.args.entity, (error, callback) => {\r\n//     if(error) {\r\n//         return callback(error);\r\n//     }\r\n    \r\n//     return callback('the form was successfully submitted');\r\n// });","title":"Submit Sandwich Application Form","requiresIdentity":false,"standalone":false,"__v":0}]

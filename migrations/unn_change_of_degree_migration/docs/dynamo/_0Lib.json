[{"_id":{"$objectID":"5a97c855c13ead3a08d674a9"},"code":"exports = function(application, fn) {\n  let d = application.personalDetails,\n    l = application.alternativeDepartment,\n    currentDepartment,\n    choiceDepartment,\n    choiceProgramme,\n    currentYearOfStudy;\n  this.entityRepo.get(\"Department\", { $or: [{ _id: d.currentDepartment }, { _id: l.choiceDepartment }] }, (error, department) => {\n    if (error) currentDepartment = \"N/A\";\n    currentDepartment = department[0] ? department[0].name : \"N/A\";\n    choiceDepartment = department[1] ? department[1].name : \"N/A\";\n    this.entityRepo.get(\"SchoolProgramme\", { _id: l.choiceProgramme }, (error, programme) => {\n      if (error) choiceProgramme = \"N/A\";\n      choiceProgramme = programme ? programme.name || programme[0].name : \"N/A\";\n      this.entityRepo.get(\"YearOfStudy\", { _id: d.currentYearOfStudy }, (error, yearOfStudy) => {\n        if (error) currentYearOfStudy = \"N/A\";\n        currentYearOfStudy = yearOfStudy ? yearOfStudy.name || yearOfStudy[0].name : \"N/A\";\n        setImmediate(fn, null, [\n          [\n            \"CHANGE_OF_DEGREE_DETAILS\",\n            {\n              details: [\n                [\"First Name\", d.firstName],\n                [\"Middle Name\", d.middleName],\n                [\"Surname\", d.surname],\n                [\"Current Department\", currentDepartment],\n                [\"Department of Choice\", choiceDepartment],\n                [\"Programme\", d.programme],\n                [\"Programme of Choice\", choiceProgramme],\n                [\"Reason for Transfer\", l.transferReason],\n                [\"Current Year of Study\", currentYearOfStudy],\n                [\"Invoice Number\", application.invoiceNumber],\n                [\"Confirmation Number\", d.confirmationNumber],\n                [\"Bank Name\", d.bankName],\n                [\"Bank Branch Name\", d.bankBranchName],\n                [\"Date Paid\", d.datePaid]\n              ]\n            }\n          ]\n        ]);\n      });\n    });\n  });\n};\n","uid":"prepareChangeOfDegreeDetails","__v":0},{"_id":{"$objectID":"5a991b762e6c8c2958c4c885"},"code":"exports = function (department, fn) {\n  return fn(null, [\n    {\n      id: department._id,\n      displayLabel: department.name,\n      elements: [\n        this.libs.createElement(\"areaOfSpecialization\", \"Area of Specialization\", \"\", this.constants.ELEMENTTYPE.SELECTSET, {\n          order: 12,\n          items: department.areasOfSpecialization.map(a => ({ id: a._id, displayLabel: a.name }))\n        })\n      ]\n    }\n  ]);\n};\n","uid":"selectedDepartmentUI","__v":0},{"_id":{"$objectID":"5a994399528eea32405dbfe2"},"code":"exports = function(yearOfStudy, fn) {\n  this.debug(yearOfStudy);\n  return fn(null, [\n    {\n      _id: yearOfStudy._id,\n      displayLabel: yearOfStudy.name\n    }\n  ]);\n};\n","uid":"selectedYearOfStudyUI","__v":0}]
